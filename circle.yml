machine:
  machine:
  java:
    version: openjdk8
  environment:
    VERSION: 0.1
    IMPORT_PATH: "github.com/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME"

dependencies:
  override:
    - sudo apt-get purge -y maven
    - if ! [ -e apache-maven-3.3.3-bin.tar.gz ]; then (curl -OL http://mirror.olnevhost.net/pub/apache/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.tar.gz); fi
    - sudo tar -zxf apache-maven-3.3.3-bin.tar.gz -C /usr/local/
    - sudo ln -s /usr/local/apache-maven-3.3.3/bin/mvn /usr/bin/mvn
    - echo "Maven is on version `mvn -v`"
    # - mvn clean install
    # - ls -alh
    # - ls -alh target/

test:
  override:
    - echo "no tests"

# deployment:
#   master:
#     branch: master
#     commands:
#       - go version
#       - go get github.com/mitchellh/gox
#       - go get github.com/tcnksm/ghr
#       - CGO_ENABLED=0 gox -output "dist/aws-es-proxy-{{.OS}}-{{.Arch}}"
#       - ghr -t $GITHUB_TOKEN -u $CIRCLE_PROJECT_USERNAME -r $CIRCLE_PROJECT_REPONAME --replace v$VERSION dist/